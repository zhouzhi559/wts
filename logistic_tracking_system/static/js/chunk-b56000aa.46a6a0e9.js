(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b56000aa"],{"5bf8":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"formDiv"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.listQuery.matter_name,callback:function(t){e.$set(e.listQuery,"matter_name",t)},expression:"listQuery.matter_name"}})],1),a("el-form-item",{attrs:{label:"物料类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listQuery.matter_category,callback:function(t){e.$set(e.listQuery,"matter_category",t)},expression:"listQuery.matter_category"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"A类",value:"A类"}}),a("el-option",{attrs:{label:"B类",value:"B类"}}),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"操作人员"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.listQuery.operate_user,callback:function(t){e.$set(e.listQuery,"operate_user",t)},expression:"listQuery.operate_user"}},e._l(e.PersonCodeNameList,(function(e,t){return a("el-option",{key:t+" dialog",attrs:{label:e.user_name,value:e.user_code}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"20px !important"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.searchBtn}},[e._v("查询")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1)],1),a("el-card",{staticClass:"box-card mt20"},[a("div",{},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:e.addBtn}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])],1)],1),a("ELTable",{attrs:{tableCol:e.tableCol,tableData:e.tableData,listQuery:e.listQuery,ispagination:e.ispagination},on:{currentChange:e.currentChange,sizeChange:e.sizeChange}})],1)]),a("el-dialog",{attrs:{title:e.dialogTitle,width:"600px",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[a("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"物料名称",prop:"matter_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:e.matter_code_disabled},model:{value:e.dialogForm.matter_code,callback:function(t){e.$set(e.dialogForm,"matter_code",t)},expression:"dialogForm.matter_code"}},e._l(e.BomMatterCodeNameList,(function(e,t){return a("el-option",{key:t+" search",attrs:{label:e.matter_name,value:e.matter_code}})})),1)],1),a("el-form-item",{attrs:{label:"数量",prop:"matter_count"}},[a("el-input",{model:{value:e.dialogForm.matter_count,callback:function(t){e.$set(e.dialogForm,"matter_count",e._n(t))},expression:"dialogForm.matter_count"}})],1),a("el-form-item",{attrs:{label:"入库日期",prop:"product_time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.dialogForm.product_time,callback:function(t){e.$set(e.dialogForm,"product_time",t)},expression:"dialogForm.product_time"}})],1),"修改物料"==e.dialogTitle?a("el-form-item",{attrs:{label:"入库人",prop:"matter_count"}},[a("span",[e._v(" "+e._s(e.dialogForm.operate_user)+" ")])]):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1)],1)},i=[],r=a("5530"),l=(a("159b"),a("a927")),s=a("fd03"),n=a("2f62"),c={name:"MaterialList",components:{ELTable:l["a"]},computed:Object(r["a"])({},Object(n["c"])(["BomMatterCodeNameList","PersonCodeNameList","CurrentUserInfo"])),data:function(){return{listQuery:{matter_name:"",matter_category:"",status:"",operate_user:"",page:1,page_size:10,total:0},listQueryBase:{matter_name:"",matter_category:"",status:"",operate_user:"",page:1,page_size:10,total:0},dialogTitle:"",matter_code_disabled:!1,dialogFlag:!1,dialogForm:{matter_code:"",matter_name:"",operate_user:"",operate_user_name:"",matter_count:"",status:"未使用",product_time:""},dialogFormBase:{matter_code:"",matter_name:"",operate_user:"",operate_user_name:"",matter_count:"",status:"未使用",product_time:""},dialogFormRules:{matter_name:[{required:!0,message:"请输入物料名称",trigger:"blur"}],matter_count:[{required:!0,message:"请输入数量",trigger:"blur"},{type:"number",message:"数量必须为数值"}],product_time:[{required:!0,message:"请选择入库日期",trigger:"change"}]},tableCol:[{label:"物料名称",field:"matter_name",align:"center"},{label:"规格型号",field:"rule",align:"center"},{label:"类型",field:"matter_category",align:"center"},{label:"数量",field:"matter_count",align:"center"},{label:"操作人员",field:"operate_user",align:"center"},{label:"入库日期",field:"product_time",align:"center"},{label:"操作",colType:"solt",align:"center",option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[],ispagination:!0}},methods:Object(r["a"])(Object(r["a"])({},Object(n["b"])(["getLogisticBomMatterCodeName","getLogisticPersonCodeName"])),{},{searchBtn:function(){this.listQuery.page=1,this.getLogisticPersonMatter(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticPersonMatter(this.listQuery)},currentChange:function(e){this.listQuery.page=e,this.getLogisticPersonMatter(this.listQuery)},sizeChange:function(e){this.listQuery.page=1,this.listQuery.page_size=e,this.getLogisticPersonMatter(this.listQuery)},addBtn:function(){var e=this;this.dialogTitle="新增物料",this.dialogFlag=!0,this.matter_code_disabled=!1,this.$nextTick((function(){e.$refs.dialogFormRef.clearValidate()})),this.dialogForm=JSON.parse(JSON.stringify(this.dialogFormBase))},getLogisticPersonMatter:function(e){var t=this;s["a"].getLogisticPersonMatter(e).then((function(e){if(console.log("物料清单列表 查询",e),0==e.code){var a=e.data.data;a.forEach((function(e){t.PersonCodeNameList.forEach((function(t){e.operate_user==t.user_code&&(e.operate_user_name=t.user_name)}))})),t.tableData=a,t.listQuery.total=e.data.total}else t.$message({message:e.message,type:"error"})}))},postLogisticPersonMatter:function(e){var t=this;s["a"].postLogisticPersonMatter(e).then((function(e){console.log("物料清单列表 新增",e),0==e.code?(t.dialogFlag=!1,t.getLogisticPersonMatter(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colEditBtn:function(e){var t=this;console.log(e),this.dialogTitle="修改物料",this.dialogFlag=!0,this.matter_code_disabled=!0,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()})),this.PersonCodeNameList.forEach((function(e){t.dialogForm.operate_user==e.user_code&&(t.dialogForm.operate_user_name=e.user_name)})),this.dialogForm={matter_code:e.matter_code,matter_count:e.matter_count,operate_user:e.operate_user,operate_user_name:e.operate_user_name,product_time:e.product_time}},getLogisticPutPersonMatter:function(e){var t=this;s["a"].getLogisticPutPersonMatter(e).then((function(e){console.log("物料清单列表 修改",e),0==e.code?(t.dialogFlag=!1,t.getLogisticPersonMatter(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},dialogSave:function(){var e=this;this.$refs.dialogFormRef.validate((function(t){t?"新增物料"==e.dialogTitle?(console.log("新增物料",e.dialogForm),e.postLogisticPersonMatter(e.dialogForm)):(console.log("修改物料",e.dialogForm),e.getLogisticPutPersonMatter(e.dialogForm)):e.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeletePersonMatter:function(e){var t=this;s["a"].getLogisticDeletePersonMatter(e).then((function(e){console.log("物料清单列表 删除",e),0==e.code?(t.getLogisticPersonMatter(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getLogisticDeletePersonMatter({matter_code:e.matter_code})}))}}),mounted:function(){this.getLogisticBomMatterCodeName(),this.getLogisticPersonCodeName(),this.getLogisticPersonMatter(this.listQuery)}},u=c,g=a("2877"),m=Object(g["a"])(u,o,i,!1,null,null,null);t["default"]=m.exports},a927:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[e.isShowSelect?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableCol,(function(t,o){return["solt"==t.colType?a("el-table-column",{key:o+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(o){return!t.isShow||t.isShow(o.row)?e._l(t.option,(function(t,i){return a("span",{key:i+"only",staticStyle:{display:"inline-block","margin-left":"5px"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.event(o.row)}}},[e._v(" "+e._s(t.label)+" ")])],1)})):void 0}}],null,!0)}):e._e(),"tag"==t.colType?a("el-table-column",{key:o+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""},scopedSlots:e._u([{key:"default",fn:function(o){return[a("el-tag",{style:[{width:t.tagRender(o.row).tagWidth?t.tagRender(o.row).tagWidth:"70px"}],attrs:{size:"medium",type:t.tagRender(o.row).tagType}},[e._v(e._s(t.tagRender(o.row).tagText))])]}}],null,!0)}):e._e(),"solt"!=t.colType&&"tag"!=t.colType&&0!=t.show?a("el-table-column",{key:o+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""}}):e._e()]}))],2),e.ispagination?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":e.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},i=[],r={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)}}},l=r,s=a("2877"),n=Object(s["a"])(l,o,i,!1,null,"b575f792",null);t["a"]=n.exports}}]);
//# sourceMappingURL=chunk-b56000aa.46a6a0e9.js.map