(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cad94e66"],{"3d1a":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"formDiv"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"产品编码"}},[o("el-input",{model:{value:e.listQuery.finished_product_code,callback:function(t){e.$set(e.listQuery,"finished_product_code",t)},expression:"listQuery.finished_product_code"}})],1),o("el-form-item",{attrs:{label:"处理结果"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listQuery.solve_method,callback:function(t){e.$set(e.listQuery,"solve_method",t)},expression:"listQuery.solve_method"}},[o("el-option",{attrs:{label:"全部",value:""}}),o("el-option",{attrs:{label:"返修",value:"返修"}}),o("el-option",{attrs:{label:"报废",value:"报废"}})],1)],1),o("el-form-item",{staticStyle:{"margin-left":"20px !important"}},[o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.searchBtn}},[e._v("查询")]),o("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1)],1),o("el-card",{staticClass:"box-card mt20"},[o("div",{},[o("ELTable",{attrs:{tableCol:e.tableCol,tableData:e.tableData,listQuery:e.listQuery,ispagination:e.ispagination},on:{currentChange:e.currentChange,sizeChange:e.sizeChange}})],1)]),o("el-dialog",{attrs:{title:e.dialogTitle,width:"600px",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[o("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"产品编码",prop:"finished_product_code"}},[o("el-input",{model:{value:e.dialogForm.finished_product_code,callback:function(t){e.$set(e.dialogForm,"finished_product_code",t)},expression:"dialogForm.finished_product_code"}})],1),o("el-form-item",{attrs:{label:"不良原因",prop:"description"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.description,callback:function(t){e.$set(e.dialogForm,"description",t)},expression:"dialogForm.description"}})],1),o("el-form-item",{attrs:{label:"处理方式",prop:"solve_method"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.solve_method,callback:function(t){e.$set(e.dialogForm,"solve_method",t)},expression:"dialogForm.solve_method"}},[o("el-option",{attrs:{label:"返修",value:"返修"}}),o("el-option",{attrs:{label:"报废",value:"报废"}})],1)],1),o("el-form-item",{attrs:{label:"返回工站",prop:"leader_work_id"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.leader_work_id,callback:function(t){e.$set(e.dialogForm,"leader_work_id",t)},expression:"dialogForm.leader_work_id"}},e._l(e.WorkCodeNameList,(function(e,t){return o("el-option",{key:t+" dialog",attrs:{label:e.work_name,value:e.work_code}})})),1)],1),o("el-form-item",{attrs:{label:"备注",prop:"solve_result"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.solve_result,callback:function(t){e.$set(e.dialogForm,"solve_result",t)},expression:"dialogForm.solve_result"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1)],1)},l=[],a=o("5530"),r=o("ade3"),n=(o("159b"),o("a4d3"),o("e01a"),o("a927")),s=o("fd03"),d=o("2f62"),c={name:"BadProduct",components:{ELTable:n["a"]},data:function(){return{listQuery:{product_plan_code:"",matter_code:"",solve_method:"",finished_product_code:"",page:1,page_size:10,total:0},listQueryBase:{product_plan_code:"",matter_code:"",solve_method:"",finished_product_code:"",page:1,page_size:10,total:0},ispagination:!0,dialogTitle:"",dialogFlag:!1,dialogForm:{unqualified_product_code:"",product_plan_code:"",finished_product_code:"",matter_code:"",description:"",leader_work_id:"",later_work_id:"",solve_method:"",solve_result:""},dialogFormBase:{unqualified_product_code:"",product_plan_code:"",finished_product_code:"",matter_code:"",description:"",leader_work_id:"",later_work_id:"",solve_method:"",solve_result:""},dialogFormRules:Object(r["a"])({product_plan_code:[{required:!0,message:"请选择处理方式",trigger:"change"}]},"product_plan_code",[{required:!0,message:"请选择处理前工站",trigger:"change"}]),tableCol:[{label:"产品编码",field:"finished_product_code",align:"center"},{label:"不良原因",field:"description",align:"center"},{label:"处理方式",field:"solve_method",align:"center"},{label:"备注",field:"solve_result",align:"center"},{label:"操作",colType:"solt",align:"center",option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[]}},computed:Object(a["a"])({},Object(d["c"])(["MatterCodeNameList","WorkCodeNameList","ProductPlanCodeNameList","CurrentUserInfo"])),methods:Object(a["a"])(Object(a["a"])({},Object(d["b"])(["getLogisticMatterNameCode","getLogisticWorkCodeName","getLogisticProductPlanCodeName"])),{},{searchBtn:function(){this.listQuery.page=1,this.getLogisticUnqualifiedProduct(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticUnqualifiedProduct(this.listQuery)},currentChange:function(e){this.listQuery.page=e,this.getLogisticUnqualifiedProduct(this.listQuery)},sizeChange:function(e){this.listQuery.page=1,this.listQuery.page_size=e,this.getLogisticUnqualifiedProduct(this.listQuery)},getLogisticUnqualifiedProduct:function(e){var t=this;s["a"].getLogisticUnqualifiedProduct(e).then((function(e){if(console.log("不良品 查询",e),0==e.code){var o=e.data.data;o.forEach((function(e){t.ProductPlanCodeNameList.forEach((function(t){e.product_plan_code==t.product_plan_code&&(e.product_plan_name=t.product_plan_name)})),t.MatterCodeNameList.forEach((function(t){e.matter_code==t.matter_code&&(e.matter_name=t.matter_name)}))})),t.tableData=o,t.listQuery.total=e.data.total}else t.$message({message:e.message,type:"error"})}))},colEditBtn:function(e){var t=this;console.log(e),this.dialogTitle="修改不良产品",this.dialogFlag=!0,this.productIdReadonly=!0,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()})),this.dialogForm={unqualified_product_code:e.unqualified_product_code,product_plan_code:e.product_plan_code,finished_product_code:e.finished_product_code,matter_code:e.matter_code,description:e.description,leader_work_id:e.leader_work_id,later_work_id:e.later_work_id,solve_method:e.solve_method,solve_result:e.solve_result}},getLogisticPutUnqualifiedProduct:function(e){var t=this;s["a"].getLogisticPutUnqualifiedProduct(e).then((function(e){console.log("不良产品 修改",e),0==e.code?(t.dialogFlag=!1,t.getLogisticUnqualifiedProduct(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},dialogSave:function(){var e=this;this.$refs.dialogFormRef.validate((function(t){t?"修改不良产品"==e.dialogTitle&&(console.log("修改不良产品",e.dialogForm),e.getLogisticPutUnqualifiedProduct(e.dialogForm)):e.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeleteUnqualifiedProduct:function(e){var t=this;s["a"].getLogisticDeleteUnqualifiedProduct(e).then((function(e){console.log("不良产品 删除",e),0==e.code?(t.getLogisticUnqualifiedProduct(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getLogisticDeleteUnqualifiedProduct({unqualified_product_code:e.unqualified_product_code})}))}}),mounted:function(){this.getLogisticMatterNameCode(),this.getLogisticWorkCodeName(),this.getLogisticProductPlanCodeName(),this.getLogisticUnqualifiedProduct(this.listQuery)}},u=c,g=o("2877"),p=Object(g["a"])(u,i,l,!1,null,null,null);t["default"]=p.exports},a927:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[e.isShowSelect?o("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableCol,(function(t,i){return["solt"==t.colType?o("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return!t.isShow||t.isShow(i.row)?e._l(t.option,(function(t,l){return o("span",{key:l+"only",staticStyle:{display:"inline-block","margin-left":"5px"}},[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.event(i.row)}}},[e._v(" "+e._s(t.label)+" ")])],1)})):void 0}}],null,!0)}):e._e(),"tag"==t.colType?o("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[o("el-tag",{style:[{width:t.tagRender(i.row).tagWidth?t.tagRender(i.row).tagWidth:"70px"}],attrs:{size:"medium",type:t.tagRender(i.row).tagType}},[e._v(e._s(t.tagRender(i.row).tagText))])]}}],null,!0)}):e._e(),"solt"!=t.colType&&"tag"!=t.colType&&0!=t.show?o("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""}}):e._e()]}))],2),e.ispagination?o("div",{staticClass:"pagination-wrap"},[o("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":e.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},l=[],a={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)}}},r=a,n=o("2877"),s=Object(n["a"])(r,i,l,!1,null,"b575f792",null);t["a"]=s.exports},e01a:function(e,t,o){"use strict";var i=o("23e7"),l=o("83ab"),a=o("da84"),r=o("5135"),n=o("861d"),s=o("9bf2").f,d=o("e893"),c=a.Symbol;if(l&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var u={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof g?new c(e):void 0===e?c():c(e);return""===e&&(u[t]=!0),t};d(g,c);var p=g.prototype=c.prototype;p.constructor=g;var m=p.toString,f="Symbol(test)"==String(c("test")),_=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var e=n(this)?this.valueOf():this,t=m.call(e);if(r(u,e))return"";var o=f?t.slice(7,-1):t.replace(_,"$1");return""===o?void 0:o}}),i({global:!0,forced:!0},{Symbol:g})}}}]);
//# sourceMappingURL=chunk-cad94e66.caf741bf.js.map