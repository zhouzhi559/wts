(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63d0d7a9"],{"99af":function(e,t,i){"use strict";var a=i("23e7"),l=i("d039"),o=i("e8b5"),n=i("861d"),s=i("7b0b"),r=i("50c4"),c=i("8418"),g=i("65f0"),d=i("1dde"),u=i("b622"),p=i("2d00"),f=u("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",y=p>=51||!l((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),b=d("concat"),v=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)},w=!y||!b;a({target:"Array",proto:!0,forced:w},{concat:function(e){var t,i,a,l,o,n=s(this),d=g(n,0),u=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?n:arguments[t],v(o)){if(l=r(o.length),u+l>m)throw TypeError(h);for(i=0;i<l;i++,u++)i in o&&c(d,u,o[i])}else{if(u>=m)throw TypeError(h);c(d,u++,o)}return d.length=u,d}})},a927:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[e.isShowSelect?i("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableCol,(function(t,a){return["solt"==t.colType?i("el-table-column",{key:a+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return!t.isShow||t.isShow(a.row)?e._l(t.option,(function(t,l){return i("span",{key:l+"only",staticStyle:{display:"inline-block","margin-left":"5px"}},[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.event(a.row)}}},[e._v(" "+e._s(t.label)+" ")])],1)})):void 0}}],null,!0)}):e._e(),"tag"==t.colType?i("el-table-column",{key:a+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[i("el-tag",{style:[{width:t.tagRender(a.row).tagWidth?t.tagRender(a.row).tagWidth:"70px"}],attrs:{size:"medium",type:t.tagRender(a.row).tagType}},[e._v(e._s(t.tagRender(a.row).tagText))])]}}],null,!0)}):e._e(),"solt"!=t.colType&&"tag"!=t.colType&&0!=t.show?i("el-table-column",{key:a+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""}}):e._e()]}))],2),e.ispagination?i("div",{staticClass:"pagination-wrap"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":e.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},l=[],o={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)}}},n=o,s=i("2877"),r=Object(s["a"])(n,a,l,!1,null,"b575f792",null);t["a"]=r.exports},eac6:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card"},[i("div",{},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:e.addBtn}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])],1)],1),i("ELTable",{attrs:{tableCol:e.tableCol,tableData:e.tableData,listQuery:e.listQuery,ispagination:e.ispagination},on:{currentChange:e.currentChange,sizeChange:e.sizeChange}})],1)]),i("el-dialog",{attrs:{title:e.dialogTitle,width:"620px",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[i("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"模板类型",prop:"file_type"}},[i("el-input",{model:{value:e.dialogForm.file_type,callback:function(t){e.$set(e.dialogForm,"file_type",t)},expression:"dialogForm.file_type"}})],1),i("el-form-item",{attrs:{label:"",prop:"file"}},[i("el-upload",{staticClass:"upload-demo",attrs:{"auto-upload":!1,action:e.UploadUrl(),accept:".txt","before-upload":e.beforeUploadFile,"before-remove":e.beforeRemove,"on-change":e.fileChange,"on-preview":e.handlePreview,"on-remove":e.handleRemove,multiple:"",limit:e.limitNum,"on-exceed":e.handleExceed,"file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传文件")]),i("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传txt文件，且不超过10M ")])],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1)],1)},l=[],o=i("5530"),n=(i("b0c0"),i("99af"),i("a927")),s=i("fd03"),r=i("2f62"),c=i("bc3a"),g=i.n(c),d={name:"UserList",components:{ELTable:n["a"]},data:function(){return{limitNum:1,fileList:[],listQuery:{page:1,page_size:10,total:0},listQueryBase:{page:1,page_size:10,total:0},ispagination:!0,dialogTitle:"",dialogFlag:!1,dialogForm:{file_type:"",file:""},dialogFormBase:{file_type:"",file:""},dialogFormRules:{file_type:[{required:!0,message:"请选择模板类型",trigger:"change"}]},tableCol:[{label:"模板类型",field:"Supplir",align:"center"},{label:"文件名称",field:"Rve",align:"center"},{label:"上传时间",field:"Rev",align:"center"},{label:"操作",colType:"solt",align:"center",width:150,option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[]}},computed:Object(o["a"])({},Object(r["c"])(["WorkCodeNameList","CurrentUserInfo"])),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["getLogisticWorkCodeName"])),{},{UploadUrl:function(){return""},beforeUploadFile:function(e){console.log("before upload"),console.log(e);var t=e.name.substring(e.name.lastIndexOf(".")+1),i=e.size/1024/1024;return"txt"!==t?(this.$message({message:"只能上传后缀是.txt的文件",type:"warning"}),!1):i>10?(this.$message({message:"文件大小不得超过10M",type:"warning"}),!1):void 0},fileChange:function(e,t){console.log(e.raw),this.fileList.push(e.raw),console.log(this.fileList)},handleRemove:function(e,t){console.log(11111,e,t),this.fileList=t},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 ".concat(this.limitNum," 个文件，本次选择了 ").concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},searchBtn:function(){this.listQuery.page=1,this.getLogisticOperationSystem(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticOperationSystem(this.listQuery)},currentChange:function(e){this.listQuery.page=e,this.getLogisticOperationSystem(this.listQuery)},sizeChange:function(e){this.listQuery.page=1,this.listQuery.page_size=e,this.getLogisticOperationSystem(this.listQuery)},getLogisticOperationSystem:function(e){var t=this;s["a"].getLogisticOperationSystem(e).then((function(e){console.log("打印参数列表 查询",e),0==e.code?(t.tableData=e.data.data,t.listQuery.total=e.data.total):t.$message({message:e.message,type:"error"})}))},postLogisticOperationSystem:function(e){var t=this;s["a"].postLogisticOperationSystem(e).then((function(e){console.log("打印参数列表 新增",e),0==e.code?(t.dialogFlag=!1,t.getLogisticOperationSystem(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},addBtn:function(){var e=this;this.dialogTitle="新增打印参数",this.dialogFlag=!0,this.$nextTick((function(){e.$refs.dialogFormRef.clearValidate()})),this.dialogForm=JSON.parse(JSON.stringify(this.dialogFormBase))},colEditBtn:function(e){var t=this;console.log(e),this.dialogTitle="修改打印参数",this.dialogFlag=!0,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()})),this.dialogForm={ID:e.ID,file_type:e.file_type,file:e.file}},getLogisticPutOperationSystem:function(e){var t=this;s["a"].getLogisticPutOperationSystem(e).then((function(e){console.log("打印参数列表 修改",e),0==e.code?(t.dialogFlag=!1,t.getLogisticOperationSystem(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},dialogSave:function(){var e=this;this.$refs.dialogFormRef.validate((function(t){if(t)if("新增打印参数"==e.dialogTitle)if(console.log("新增打印参数",e.dialogForm),console.log(e.fileList.length,e.fileList),console.log(e.fileList.length,e.fileList[0]),0===e.fileList.length)e.$message.warning("请上传文件");else{var i=new FormData;i.append("file",e.fileList[0]),i.append("fileType","物料编码"),console.log("form",i),g()({url:"/LogisticAddModel",method:"post",data:i,traditional:!0,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){0==t.data.code?e.$message({message:t.data.message,type:"success"}):e.$message({message:t.data.message,type:"error"})}))}else"修改打印参数"==e.dialogTitle&&(console.log("修改打印参数",e.dialogForm),e.getLogisticPutOperationSystem(e.dialogForm));else e.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeleteOperationSystem:function(e){var t=this;s["a"].getLogisticDeleteOperationSystem(e).then((function(e){console.log("打印参数列表 删除",e),0==e.code?(t.getLogisticOperationSystem(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getLogisticDeleteOperationSystem({ID:e.ID})}))}}),mounted:function(){this.getLogisticOperationSystem(this.listQuery)}},u=d,p=i("2877"),f=Object(p["a"])(u,a,l,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-63d0d7a9.72adfc79.js.map