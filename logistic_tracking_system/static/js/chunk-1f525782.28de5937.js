(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f525782"],{3899:function(e,t,o){"use strict";o("829a")},"7b35":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"formDiv"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"工站编码"}},[o("el-input",{model:{value:e.listQuery.work_id,callback:function(t){e.$set(e.listQuery,"work_id",t)},expression:"listQuery.work_id"}})],1),o("el-form-item",{attrs:{label:"工站名称"}},[o("el-input",{model:{value:e.listQuery.work_name,callback:function(t){e.$set(e.listQuery,"work_name",t)},expression:"listQuery.work_name"}})],1),o("el-form-item",{staticStyle:{"margin-left":"20px !important"}},[o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.searchBtn}},[e._v("查询")]),o("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1)],1),o("el-card",{staticClass:"box-card mt20"},[o("div",{},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:e.addUser}},[o("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])],1)],1),o("ELTable",{attrs:{tableCol:e.tableCol,tableData:e.tableData,listQuery:e.listQuery,ispagination:e.ispagination},on:{currentChange:e.currentChange,sizeChange:e.sizeChange}})],1)]),o("el-dialog",{attrs:{title:e.dialogTitle,width:"600px",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[o("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"工站编码",prop:"work_id"}},[e.workIdReadonly?o("span",[e._v(e._s(e.dialogForm.work_id))]):o("el-input",{model:{value:e.dialogForm.work_id,callback:function(t){e.$set(e.dialogForm,"work_id",t)},expression:"dialogForm.work_id"}})],1),o("el-form-item",{attrs:{label:"工站名称",prop:"work_name"}},[o("el-input",{model:{value:e.dialogForm.work_name,callback:function(t){e.$set(e.dialogForm,"work_name",t)},expression:"dialogForm.work_name"}})],1),o("el-form-item",{attrs:{label:"工站类型",prop:"work_type"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.work_type,callback:function(t){e.$set(e.dialogForm,"work_type",t)},expression:"dialogForm.work_type"}},[o("el-option",{attrs:{label:"加工",value:"加工"}}),o("el-option",{attrs:{label:"测试",value:"测试"}}),o("el-option",{attrs:{label:"维修",value:"维修"}}),o("el-option",{attrs:{label:"包装",value:"包装"}}),o("el-option",{attrs:{label:"检验",value:"检验"}}),o("el-option",{attrs:{label:"入库出库",value:"入库出库"}})],1)],1),o("el-form-item",{attrs:{label:"上级工站",prop:"leader_work_id"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.leader_work_id_change},model:{value:e.dialogForm.leader_work_id,callback:function(t){e.$set(e.dialogForm,"leader_work_id",t)},expression:"dialogForm.leader_work_id"}},e._l(e.WorkCodeNameList,(function(e,t){return o("el-option",{key:t+" dialogForm",attrs:{label:e.work_id+"_"+e.work_name,value:e.work_id}})})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"表管理",width:"1000px",visible:e.dialogEditTableFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEditTableFlag=t}}},[o("WorkStationListEditTable",{attrs:{work_code:e.work_code}})],1)],1)},i=[],a=o("5530"),r=(o("159b"),o("a927")),n=o("fd03"),s=o("2f62"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"100px"}},[o("el-row",[o("div",[o("p",{staticClass:"dialog-title"},[e._v("基本信息")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"表名称",prop:"table_name"}},[o("el-input",{model:{value:e.dialogForm.table_name,callback:function(t){e.$set(e.dialogForm,"table_name",t)},expression:"dialogForm.table_name"}})],1)],1)],1),o("el-form-item",{attrs:{label:"备注",prop:"description"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.description,callback:function(t){e.$set(e.dialogForm,"description",t)},expression:"dialogForm.description"}})],1)],1),o("div",[o("p",{staticClass:"dialog-title"},[e._v("字段明细")]),o("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.AddListRow()}}},[e._v("添加字段")]),o("el-table",{staticClass:"dialogTable",staticStyle:{width:"100%"},attrs:{data:e.dialogForm.response_datas,height:"350"}},[o("el-table-column",{attrs:{fixed:"left",label:"字段名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{attrs:{prop:"response_datas."+t.$index+".field_name",rules:[{required:!0,message:"字段名称不能为空"}]}},[o("el-input",{model:{value:t.row.field_name,callback:function(o){e.$set(t.row,"field_name",o)},expression:"scope.row.field_name"}})],1)]}}])}),o("el-table-column",{attrs:{label:"字段类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{attrs:{prop:"response_datas."+t.$index+".field_type",rules:[{required:!0,message:"类型不能为空"}]}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.field_type,callback:function(o){e.$set(t.row,"field_type",o)},expression:"scope.row.field_type"}},[o("el-option",{attrs:{label:"INT",value:"INT"}}),o("el-option",{attrs:{label:"VARCHAR",value:"VARCHAR"}}),o("el-option",{attrs:{label:"DATETIME",value:"DATETIME"}}),o("el-option",{attrs:{label:"FLOAT",value:"FLOAT"}})],1)],1)]}}])}),o("el-table-column",{attrs:{label:"主键",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",[o("el-radio",{staticClass:"textRadio",attrs:{label:t.$index},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s())])],1)]}}])}),o("el-table-column",{attrs:{label:"不可为空",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{attrs:{prop:"response_datas."+t.$index+".field_NN",rules:[{required:!0,message:"类型不能为空"}]}},[o("el-checkbox",{model:{value:t.row.field_NN,callback:function(o){e.$set(t.row,"field_NN",o)},expression:"scope.row.field_NN"}})],1)]}}])}),o("el-table-column",{attrs:{label:"自增",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",{attrs:{prop:"response_datas."+t.$index+".field_AI",rules:[{required:!0,message:"类型不能为空"}]}},[o("el-checkbox",{model:{value:t.row.field_AI,callback:function(o){e.$set(t.row,"field_AI",o)},expression:"scope.row.field_AI"}})],1)]}}])}),o("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form-item",[o("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)]}}])})],1)],1)])],1),o("div",{staticClass:"dialog-footer mt20",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.colDeleteBtn}},[e._v("删 除")]),o("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1)},c=[],g=(o("a434"),{computed:Object(a["a"])({},Object(s["c"])(["CurrentUserInfo"])),props:{work_code:{type:String,default:""}},data:function(){return{radio:0,dialogForm:{work_code:"",table_name:"",description:"",response_datas:[{field_name:"",field_type:"",field_PK:!1,field_NN:!1,field_AI:!1}]},dialogFormBase:{work_code:"",table_name:"",description:"",response_datas:[{field_name:"",field_type:"",field_PK:!1,field_NN:!1,field_AI:!1}]},dialogFormRules:{product_name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],product_id:[{required:!0,message:"请输入产品编码",trigger:"blur"},{min:3,max:18,message:"长度为3~18个字节!",trigger:"blur"},{trigger:"blur",validator:function(e,t,o){var l=/^[a-z0-9]+$/;console.log(l.test(t)),l.test(t)?o():o(new Error("仅允许小写字母和数字!"))}}]}}},methods:{AddListRow:function(){this.dialogForm.response_datas.push({field_name:"",field_type:"",field_PK:!1,field_NN:!1,field_AI:!1})},handleDelete:function(e,t){var o=this;t.field_code?this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var l={prodect_code:t.prodect_code,response_datas:JSON.stringify([{field_code:t.field_code}])};o.getLogisticDeleteBOMProductList(l),o.dialogForm.response_datas.splice(e,1)})):this.dialogForm.response_datas.splice(e,1)},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o={table_code:e.table_code,response_datas:JSON.stringify([])};t.getLogisticDeleteBOMProductList(o)}))},dialogSave:function(){console.log(this.radio),this.dialogForm.work_code=this.work_code,this.dialogForm.response_datas[this.radio].field_PK=!0,console.log(this.dialogForm)}}}),u=g,m=(o("3899"),o("2877")),p=Object(m["a"])(u,d,c,!1,null,"363772bd",null),f=p.exports,_={name:"WorkstationList",components:{ELTable:r["a"],WorkStationListEditTable:f},computed:Object(a["a"])({},Object(s["c"])(["WorkCodeNameList"])),data:function(){return{work_code:"",workIdReadonly:!1,listQuery:{work_id:"",work_name:"",page:1,page_size:10,total:0},listQueryBase:{work_id:"",work_name:"",page:1,page_size:10,total:0},ispagination:!0,dialogTitle:"",dialogFlag:!1,dialogEditTableFlag:!1,dialogForm:{work_id:"",work_name:"",work_type:"",leader_work_id:""},dialogFormBase:{work_id:"",work_name:"",work_type:"",leader_work_id:""},dialogFormRules:{work_id:[{required:!0,message:"请输入工站编码",trigger:"blur"},{min:3,max:18,message:"长度为3~18个字节!",trigger:"blur"},{trigger:"blur",validator:function(e,t,o){var l=/^[a-zA-Z0-9_]+$/;console.log(l.test(t)),l.test(t)?o():o(new Error("仅允许大小写字母和下划线!"))}}],work_name:[{required:!0,message:"请输入工站名称",trigger:"blur"}],work_type:[{required:!0,message:"请选择工站类型",trigger:"change"}]},tableCol:[{label:"工站编码",field:"work_id",align:"center"},{label:"工站名称",field:"work_name",align:"center"},{label:"工站类型",field:"work_type",align:"center"},{label:"上级工站",field:"leader_work_name",align:"center"},{label:"操作",colType:"solt",align:"center",option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[]}},methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["getLogisticWorkCodeName"])),{},{searchBtn:function(){this.listQuery.page=1,this.getLogisticWorkStation(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticWorkStation(this.listQuery)},currentChange:function(e){this.listQuery.page=e,this.getLogisticWorkStation(this.listQuery)},sizeChange:function(e){this.listQuery.page=1,this.listQuery.page_size=e,this.getLogisticWorkStation(this.listQuery)},getLogisticWorkStation:function(e){var t=this;n["a"].getLogisticWorkStation(e).then((function(e){if(console.log("工站列表 查询",e),0==e.code){var o=e.data.data;o.forEach((function(e){t.WorkCodeNameList.forEach((function(t){e.leader_work_id==t.work_id&&(e.leader_work_name=t.work_id+"_"+t.work_name)}))})),t.tableData=o,t.listQuery.total=e.data.total}else t.$message({message:e.message,type:"error"})}))},postLogisticWorkStation:function(e){var t=this;n["a"].postLogisticWorkStation(e).then((function(e){console.log("工站列表 新增",e),0==e.code?(t.dialogFlag=!1,t.getLogisticWorkStation(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},addUser:function(){var e=this;this.dialogTitle="新增工站",this.dialogFlag=!0,this.workIdReadonly=!1,this.$nextTick((function(){e.$refs.dialogFormRef.clearValidate()})),this.dialogForm=JSON.parse(JSON.stringify(this.dialogFormBase)),this.getLogisticWorkCodeName()},colEditBtn:function(e){var t=this;this.getLogisticWorkCodeName(),console.log(e),this.dialogTitle="修改工站",this.dialogFlag=!0,this.workIdReadonly=!0,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()})),this.dialogForm={work_code:e.work_code,work_id:e.work_id,work_name:e.work_name,work_type:e.work_type,leader_work_id:e.leader_work_id}},getLogisticPutWorkStation:function(e){var t=this;n["a"].getLogisticPutWorkStation(e).then((function(e){console.log("工站列表 修改",e),0==e.code?(t.dialogFlag=!1,t.getLogisticWorkStation(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},leader_work_id_change:function(){console.log(this.dialogForm.work_id),console.log(this.dialogForm.leader_work_id)},dialogSave:function(){var e=this;console.log(this.dialogTitle),this.$refs.dialogFormRef.validate((function(t){if(t)return e.dialogForm.work_id==e.dialogForm.leader_work_id?(e.$message({message:"本工站和上级工站不可相同!",type:"error"}),!1):void("新增工站"==e.dialogTitle?(console.log("新增工站",e.dialogForm),e.postLogisticWorkStation(e.dialogForm)):"修改工站"==e.dialogTitle&&(console.log("修改工站",e.dialogForm),e.getLogisticPutWorkStation(e.dialogForm)));e.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeleteWorkStation:function(e){var t=this;n["a"].getLogisticDeleteWorkStation(e).then((function(e){console.log("工站列表 删除",e),0==e.code?(t.getLogisticWorkStation(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getLogisticDeleteWorkStation({work_code:e.work_code})}))},colEditTable:function(e){this.work_code=e.work_code,this.dialogEditTableFlag=!0}}),mounted:function(){this.getLogisticWorkStation(this.listQuery)}},k=_,h=Object(m["a"])(k,l,i,!1,null,null,null);t["default"]=h.exports},"829a":function(e,t,o){},a434:function(e,t,o){"use strict";var l=o("23e7"),i=o("23cb"),a=o("a691"),r=o("50c4"),n=o("7b0b"),s=o("65f0"),d=o("8418"),c=o("1dde"),g=c("splice"),u=Math.max,m=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!g},{splice:function(e,t){var o,l,c,g,_,k,h=n(this),b=r(h.length),w=i(e,b),y=arguments.length;if(0===y?o=l=0:1===y?(o=0,l=b-w):(o=y-2,l=m(u(a(t),0),b-w)),b+o-l>p)throw TypeError(f);for(c=s(h,l),g=0;g<l;g++)_=w+g,_ in h&&d(c,g,h[_]);if(c.length=l,o<l){for(g=w;g<b-l;g++)_=g+l,k=g+o,_ in h?h[k]=h[_]:delete h[k];for(g=b;g>b-l+o;g--)delete h[g-1]}else if(o>l)for(g=b-l;g>w;g--)_=g+l-1,k=g+o-1,_ in h?h[k]=h[_]:delete h[k];for(g=0;g<o;g++)h[g+w]=arguments[g+2];return h.length=b-l+o,c}})},a927:function(e,t,o){"use strict";var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[e.isShowSelect?o("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableCol,(function(t,l){return["solt"==t.colType?o("el-table-column",{key:l+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(l){return!t.isShow||t.isShow(l.row)?e._l(t.option,(function(t,i){return o("span",{key:i+"only",staticStyle:{display:"inline-block","margin-left":"5px"}},[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.event(l.row)}}},[e._v(" "+e._s(t.label)+" ")])],1)})):void 0}}],null,!0)}):e._e(),"tag"==t.colType?o("el-table-column",{key:l+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""},scopedSlots:e._u([{key:"default",fn:function(l){return[o("el-tag",{style:[{width:t.tagRender(l.row).tagWidth?t.tagRender(l.row).tagWidth:"70px"}],attrs:{size:"medium",type:t.tagRender(l.row).tagType}},[e._v(e._s(t.tagRender(l.row).tagText))])]}}],null,!0)}):e._e(),"solt"!=t.colType&&"tag"!=t.colType&&0!=t.show?o("el-table-column",{key:l+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""}}):e._e()]}))],2),e.ispagination?o("div",{staticClass:"pagination-wrap"},[o("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":e.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},i=[],a={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)}}},r=a,n=o("2877"),s=Object(n["a"])(r,l,i,!1,null,"b575f792",null);t["a"]=s.exports}}]);
//# sourceMappingURL=chunk-1f525782.28de5937.js.map