(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cc73412"],{1276:function(e,t,r){"use strict";var i=r("d784"),a=r("44e7"),l=r("825a"),o=r("1d80"),s=r("4840"),n=r("8aa5"),u=r("50c4"),c=r("14c3"),d=r("9263"),g=r("d039"),p=[].push,h=Math.min,f=4294967295,m=!g((function(){return!RegExp(f,"y")}));i("split",2,(function(e,t,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var i=String(o(this)),l=void 0===r?f:r>>>0;if(0===l)return[];if(void 0===e)return[i];if(!a(e))return t.call(i,e,l);var s,n,u,c=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,m=new RegExp(e.source,g+"g");while(s=d.call(m,i)){if(n=m.lastIndex,n>h&&(c.push(i.slice(h,s.index)),s.length>1&&s.index<i.length&&p.apply(c,s.slice(1)),u=s[0].length,h=n,c.length>=l))break;m.lastIndex===s.index&&m.lastIndex++}return h===i.length?!u&&m.test("")||c.push(""):c.push(i.slice(h)),c.length>l?c.slice(0,l):c}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=o(this),l=void 0==t?void 0:t[e];return void 0!==l?l.call(t,a,r):i.call(String(a),t,r)},function(e,a){var o=r(i,e,this,a,i!==t);if(o.done)return o.value;var d=l(e),g=String(this),p=s(d,RegExp),_=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),b=new p(m?d:"^(?:"+d.source+")",y),v=void 0===a?f:a>>>0;if(0===v)return[];if(0===g.length)return null===c(b,g)?[g]:[];var x=0,w=0,F=[];while(w<g.length){b.lastIndex=m?w:0;var C,E=c(b,m?g:g.slice(w));if(null===E||(C=h(u(b.lastIndex+(m?0:w)),g.length))===x)w=n(g,w,_);else{if(F.push(g.slice(x,w)),F.length===v)return F;for(var k=1;k<=E.length-1;k++)if(F.push(E[k]),F.length===v)return F;w=x=C}}return F.push(g.slice(x)),F}]}),!m)},"14c3":function(e,t,r){var i=r("c6b6"),a=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var l=r.call(e,t);if("object"!==typeof l)throw TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"44e7":function(e,t,r){var i=r("861d"),a=r("c6b6"),l=r("b622"),o=l("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},"8aa5":function(e,t,r){"use strict";var i=r("6547").charAt;e.exports=function(e,t,r){return t+(r?i(e,t).length:1)}},9263:function(e,t,r){"use strict";var i=r("ad6d"),a=r("9f7f"),l=r("5692"),o=RegExp.prototype.exec,s=l("native-string-replace",String.prototype.replace),n=o,u=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],g=u||d||c;g&&(n=function(e){var t,r,a,l,n=this,g=c&&n.sticky,p=i.call(n),h=n.source,f=0,m=e;return g&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),m=String(e).slice(n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&"\n"!==e[n.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,f++),r=new RegExp("^(?:"+h+")",p)),d&&(r=new RegExp("^"+h+"$(?!\\s)",p)),u&&(t=n.lastIndex),a=o.call(g?r:n,m),g?a?(a.input=a.input.slice(f),a[0]=a[0].slice(f),a.index=n.lastIndex,n.lastIndex+=a[0].length):n.lastIndex=0:u&&a&&(n.lastIndex=n.global?a.index+a[0].length:t),d&&a&&a.length>1&&s.call(a[0],r,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a}),e.exports=n},"9f7f":function(e,t,r){"use strict";var i=r("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a927:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[e.isShowSelect?r("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableCol,(function(t,i){return["solt"==t.colType?r("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return!t.isShow||t.isShow(i.row)?e._l(t.option,(function(t,a){return r("span",{key:a+"only",staticStyle:{display:"inline-block","margin-left":"5px"}},[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.event(i.row)}}},[e._v(" "+e._s(t.label)+" ")])],1)})):void 0}}],null,!0)}):e._e(),"tag"==t.colType?r("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[r("el-tag",{style:[{width:t.tagRender(i.row).tagWidth?t.tagRender(i.row).tagWidth:"70px"}],attrs:{size:"medium",type:t.tagRender(i.row).tagType}},[e._v(e._s(t.tagRender(i.row).tagText))])]}}],null,!0)}):e._e(),"solt"!=t.colType&&"tag"!=t.colType&&0!=t.show?r("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""}}):e._e()]}))],2),e.ispagination?r("div",{staticClass:"pagination-wrap"},[r("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":e.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},a=[],l={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)}}},o=l,s=r("2877"),n=Object(s["a"])(o,i,a,!1,null,"b575f792",null);t["a"]=n.exports},ac1f:function(e,t,r){"use strict";var i=r("23e7"),a=r("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,r){"use strict";var i=r("825a");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c75b:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"formDiv"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"工号"}},[r("el-input",{model:{value:e.listQuery.user_id,callback:function(t){e.$set(e.listQuery,"user_id",t)},expression:"listQuery.user_id"}})],1),r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{model:{value:e.listQuery.user_name,callback:function(t){e.$set(e.listQuery,"user_name",t)},expression:"listQuery.user_name"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},[r("el-option",{attrs:{label:"全部",value:""}}),r("el-option",{attrs:{label:"启用",value:"启用"}}),r("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1),r("el-form-item",{staticStyle:{"margin-left":"20px !important"}},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.searchBtn}},[e._v("查询")]),r("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1)],1),r("el-card",{staticClass:"box-card mt20"},[r("div",{},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:e.addBtn}},[r("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])],1)],1),r("ELTable",{attrs:{tableCol:e.tableCol,tableData:e.tableData,listQuery:e.listQuery,ispagination:e.ispagination},on:{currentChange:e.currentChange,sizeChange:e.sizeChange}})],1)]),r("el-dialog",{attrs:{title:e.dialogTitle,width:"600px",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[r("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"100px"}},["db_common"==e.CurrentUserInfo.product_id?r("el-form-item",{attrs:{label:"角色",prop:"user_role",rules:[{required:!0,message:"请选择角色",trigger:"change"}]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.roleChane},model:{value:e.dialogForm.user_role,callback:function(t){e.$set(e.dialogForm,"user_role",t)},expression:"dialogForm.user_role"}},[r("el-option",{attrs:{label:"管理员",value:"管理员"}}),r("el-option",{attrs:{label:"超级管理员",value:"超级管理员"}}),r("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1):e._e(),"超级管理员"!=e.dialogForm.user_role&&"超级管理员"==e.CurrentUserInfo.user_role?r("el-form-item",{attrs:{label:"项目",prop:"user_product_idArr",rules:[{required:!0,message:"请选择项目",trigger:"change"}]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.dialogForm.user_product_idArr,callback:function(t){e.$set(e.dialogForm,"user_product_idArr",t)},expression:"dialogForm.user_product_idArr"}},e._l(e.ProductIdNameList,(function(e,t){return r("el-option",{key:t+" search",attrs:{label:e.product_name,value:e.product_id}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"工号",prop:"user_id"}},[r("el-input",{model:{value:e.dialogForm.user_id,callback:function(t){e.$set(e.dialogForm,"user_id",t)},expression:"dialogForm.user_id"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"user_name"}},[r("el-input",{model:{value:e.dialogForm.user_name,callback:function(t){e.$set(e.dialogForm,"user_name",t)},expression:"dialogForm.user_name"}})],1),"新增人员"==e.dialogTitle?r("el-form-item",{attrs:{label:"密码",prop:"user_password",rules:[{required:!0,message:"请输入密码"}]}},[r("el-input",{attrs:{type:"password"},model:{value:e.dialogForm.user_password,callback:function(t){e.$set(e.dialogForm,"user_password",t)},expression:"dialogForm.user_password"}})],1):e._e(),"超级管理员"!=e.CurrentUserInfo.user_role?r("el-form-item",{attrs:{label:"权限",prop:"user_authorityArr"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:e.dialogForm.user_authorityArr,callback:function(t){e.$set(e.dialogForm,"user_authorityArr",t)},expression:"dialogForm.user_authorityArr"}},e._l(e.WorkCodeNameList,(function(e,t){return r("el-option",{key:t+" search",attrs:{label:e.work_name,value:e.work_id}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.status,callback:function(t){e.$set(e.dialogForm,"status",t)},expression:"dialogForm.status"}},[r("el-option",{attrs:{label:"启用",value:"启用"}}),r("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1)],1)},a=[],l=r("1da1"),o=r("5530"),s=(r("96cf"),r("159b"),r("1276"),r("ac1f"),r("a927")),n=r("fd03"),u=r("2f62"),c={name:"UserList",components:{ELTable:s["a"]},data:function(){return{listQuery:{user_id:"",user_name:"",status:"",page:1,page_size:10,total:0},listQueryBase:{user_id:"",user_name:"",status:"",page:1,page_size:10,total:0},ispagination:!0,dialogTitle:"",dialogFlag:!1,dialogForm:{user_code:"",user_role:"",user_product_id:"",user_id:"",user_name:"",user_password:"",user_authorityArr:[],user_product_idArr:[],user_authority:"",status:"启用"},dialogFormBase:{user_code:"",user_role:"",user_product_id:"",user_id:"",user_name:"",user_password:"",user_authorityArr:[],user_product_idArr:[],user_authority:"",status:"启用"},dialogFormRules:{user_id:[{required:!0,message:"请输入员工号",trigger:"blur"}],user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},is_db_common:!0,tableCol:[{label:"工号",field:"user_id",align:"center"},{label:"用户名",field:"user_name",align:"center"},{label:"权限",field:"authorityStrArr",align:"center"},{label:"状态",field:"status",align:"center",colType:"tag",tagRender:function(e){var t={tagType:"",tagText:e.status};return"启用"==e.status?t.tagType="":t.tagType="warning",t}},{label:"角色",field:"user_role",align:"center"},{label:"项目",field:"user_product_idStrArr",align:"center"},{label:"操作",colType:"solt",align:"center",option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[]}},computed:Object(o["a"])({},Object(u["c"])(["CurrentUserInfo","ProductIdNameList","WorkCodeNameList"])),methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])(["getLogisticGetProductId","getLogisticWorkCodeName"])),{},{searchBtn:function(){this.listQuery.page=1,this.getLogisticPersonDeal(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticPersonDeal(this.listQuery)},currentChange:function(e){this.listQuery.page=e,this.getLogisticPersonDeal(this.listQuery)},sizeChange:function(e){this.listQuery.page=1,this.listQuery.page_size=e,this.getLogisticPersonDeal(this.listQuery)},getLogisticPersonDeal:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getLogisticWorkCodeName();case 2:n["a"].getLogisticPersonDeal(e).then((function(e){if(console.log("人员列表 查询",e),0==e.code){var r=e.data.data;r.forEach((function(e){var r=e.user_authority.split(","),i=e.user_product_id.split(","),a="",l="";r.forEach((function(e){t.WorkCodeNameList.forEach((function(t){e==t.work_id&&(a+=t.work_name+",")}))})),a=a.substring(0,a.length-1),i.forEach((function(e){console.log(e),t.ProductIdNameList.forEach((function(t){e==t.product_id&&(l+=t.product_name+",")}))})),l=l.substring(0,l.length-1),e.authorityStrArr=a,e.user_product_idStrArr=l})),t.tableData=r,t.listQuery.total=e.data.total}else t.$message({message:e.message,type:"error"})}));case 3:case"end":return r.stop()}}),r)})))()},postLogisticPersonDeal:function(e){var t=this;n["a"].postLogisticPersonDeal(e).then((function(e){console.log("人员列表 新增",e),0==e.code?(t.dialogFlag=!1,t.getLogisticPersonDeal(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},addBtn:function(){var e=this;this.dialogTitle="新增人员",this.dialogFlag=!0,this.$nextTick((function(){e.$refs.dialogFormRef.clearValidate()})),this.dialogForm=JSON.parse(JSON.stringify(this.dialogFormBase))},roleChane:function(e){console.log(e),"超级管理员"==e&&(this.dialogForm.user_product_id="")},colEditBtn:function(e){var t=this;console.log(e),this.dialogTitle="修改人员",this.dialogFlag=!0,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()}));var r=[],i=[];e.user_authority&&(r=e.user_authority.split(",")),e.user_product_id&&(i=e.user_product_id.split(",")),this.dialogForm={user_code:e.user_code,user_id:e.user_id,user_role:e.user_role,user_product_id:e.user_product_id,user_product_idArr:i,user_name:e.user_name,user_password:e.user_password,user_authority:e.user_authority,user_authorityArr:r,status:e.status}},getLogisticPutPerson:function(e){var t=this;n["a"].getLogisticPutPerson(e).then((function(e){console.log("人员列表 修改",e),0==e.code?(t.dialogFlag=!1,t.getLogisticPersonDeal(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},dialogSave:function(){var e=this;console.log(this.dialogForm),this.$refs.dialogFormRef.validate((function(t){if(t){if(e.dialogForm.user_authorityArr&&e.dialogForm.user_authorityArr.length>0){var r="";e.dialogForm.user_authorityArr.forEach((function(e){r+=e+","})),r=r.substring(0,r.length-1),e.dialogForm.user_authority=r}if(e.dialogForm.user_product_idArr&&e.dialogForm.user_product_idArr.length>0){var i="";e.dialogForm.user_product_idArr.forEach((function(e){i+=e+","})),i=i.substring(0,i.length-1),e.dialogForm.user_product_id=i}"新增人员"==e.dialogTitle?(console.log("新增人员",e.dialogForm),e.postLogisticPersonDeal(e.dialogForm)):"修改人员"==e.dialogTitle&&(console.log("修改人员",e.dialogForm),e.getLogisticPutPerson(e.dialogForm))}else e.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeletePerson:function(e){var t=this;n["a"].getLogisticDeletePerson(e).then((function(e){console.log("人员列表 删除",e),0==e.code?(t.getLogisticPersonDeal(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.getLogisticDeletePerson({user_code:e.user_code})}))}}),mounted:function(){console.log("this.CurrentUserInfo 213",this.CurrentUserInfo),"db_common"==this.CurrentUserInfo.product_id?this.tableCol[2].show=!1:(this.tableCol[4].show=!1,this.tableCol[5].show=!1),this.getLogisticGetProductId(),this.getLogisticPersonDeal(this.listQuery)}},d=c,g=r("2877"),p=Object(g["a"])(d,i,a,!1,null,null,null);t["a"]=p.exports},d784:function(e,t,r){"use strict";r("ac1f");var i=r("6eeb"),a=r("d039"),l=r("b622"),o=r("9263"),s=r("9112"),n=l("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),d=l("replace"),g=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,d){var h=l(e),f=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),m=f&&!a((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[n]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!f||!m||"replace"===e&&(!u||!c||g)||"split"===e&&!p){var _=/./[h],y=r(h,""[e],(function(e,t,r,i,a){return t.exec===o?f&&!a?{done:!0,value:_.call(t,r,i)}:{done:!0,value:e.call(r,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),b=y[0],v=y[1];i(String.prototype,e,b),i(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}d&&s(RegExp.prototype[h],"sham",!0)}}}]);
//# sourceMappingURL=chunk-6cc73412.f575b4db.js.map