(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a50f942"],{a434:function(e,t,a){"use strict";var i=a("23e7"),o=a("23cb"),n=a("a691"),s=a("50c4"),r=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=d("splice"),g=Math.max,p=Math.min,h=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,i,d,u,m,_,y=r(this),b=s(y.length),v=o(e,b),S=arguments.length;if(0===S?a=i=0:1===S?(a=0,i=b-v):(a=S-2,i=p(g(n(t),0),b-v)),b+a-i>h)throw TypeError(f);for(d=l(y,i),u=0;u<i;u++)m=v+u,m in y&&c(d,u,y[m]);if(d.length=i,a<i){for(u=v;u<b-i;u++)m=u+i,_=u+a,m in y?y[_]=y[m]:delete y[_];for(u=b;u>b-i+a;u--)delete y[u-1]}else if(a>i)for(u=b-i;u>v;u--)m=u+i-1,_=u+a-1,m in y?y[_]=y[m]:delete y[_];for(u=0;u<a;u++)y[u+v]=arguments[u+2];return y.length=b-i+a,d}})},a927:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[e.isShowSelect?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableCol,(function(t,i){return["solt"==t.colType?a("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return!t.isShow||t.isShow(i.row)?e._l(t.option,(function(t,o){return a("span",{key:o+"only",staticStyle:{display:"inline-block","margin-left":"5px"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.event(i.row)}}},[e._v(" "+e._s(t.label)+" ")])],1)})):void 0}}],null,!0)}):e._e(),"tag"==t.colType?a("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[a("el-tag",{style:[{width:t.tagRender(i.row).tagWidth?t.tagRender(i.row).tagWidth:"70px"}],attrs:{size:"medium",type:t.tagRender(i.row).tagType}},[e._v(e._s(t.tagRender(i.row).tagText))])]}}],null,!0)}):e._e(),"solt"!=t.colType&&"tag"!=t.colType&&0!=t.show?a("el-table-column",{key:i+"only",attrs:{prop:t.field,label:t.label,width:t.width,align:t.align,sortable:""}}):e._e()]}))],2),e.ispagination?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":e.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},o=[],n={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentChange",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)}}},s=n,r=a("2877"),l=Object(r["a"])(s,i,o,!1,null,"b575f792",null);t["a"]=l.exports},e8d9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"formDiv"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"生产计划"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listQuery.product_plan_code,callback:function(t){e.$set(e.listQuery,"product_plan_code",t)},expression:"listQuery.product_plan_code"}},e._l(e.ProductPlanCodeNameList,(function(e,t){return a("el-option",{key:t+" search",attrs:{label:e.product_plan_name,value:e.product_plan_code}})})),1)],1),a("el-form-item",{attrs:{label:"包装编码"}},[a("el-input",{model:{value:e.listQuery.pack_id,callback:function(t){e.$set(e.listQuery,"pack_id",t)},expression:"listQuery.pack_id"}})],1),a("el-form-item",{attrs:{label:"操作人员"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.listQuery.enter_user,callback:function(t){e.$set(e.listQuery,"enter_user",t)},expression:"listQuery.enter_user"}},e._l(e.PersonCodeNameList,(function(e,t){return a("el-option",{key:t+" dialog",attrs:{label:e.user_name,value:e.user_code}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"20px !important"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.searchBtn}},[e._v("查询")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],1)],1),a("el-card",{staticClass:"box-card mt20"},[a("div",{},[a("ELTable",{attrs:{tableCol:e.tableCol,tableData:e.tableData,listQuery:e.listQuery,ispagination:e.ispagination},on:{currentChange:e.currentChange,sizeChange:e.sizeChange}})],1)]),a("el-dialog",{attrs:{title:e.dialogTitle,width:"1000px",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[a("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px","max-height":"500px"},attrs:{model:e.dialogForm,rules:e.dialogFormRules,"label-width":"100px"}},[a("el-row",e._l(e.dialogForm.response_datas,(function(t,i){return a("el-col",{key:i+" onlyItem",attrs:{span:12}},[a("el-form-item",{attrs:{prop:"response_datas."+i+".finished_product_code",rules:[],label:"产品编码"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:16}},[a("el-input",{ref:"finishedProductCode"+i,refInFor:!0,model:{value:t.finished_product_code,callback:function(a){e.$set(t,"finished_product_code",a)},expression:"item.finished_product_code"}})],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(a){return e.handleDelete(i,t)}}},[e._v("删除")])],1)],1)],1)],1)})),1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)],1)],1)},o=[],n=a("1da1"),s=a("5530"),r=(a("96cf"),a("159b"),a("a434"),a("a927")),l=a("fd03"),c=a("2f62"),d={name:"UserList",components:{ELTable:r["a"]},data:function(){return{listQuery:{product_plan_code:"",enter_time:"",enter_user:"",page:1,page_size:10,total:0},listQueryBase:{product_plan_code:"",enter_time:"",enter_user:"",page:1,page_size:10,total:0},ispagination:!0,dialogFlag:!1,dialogForm:{response_datas:[]},dialogFormBase:{response_datas:[]},dialogFormRules:{user_id:[{required:!0,message:"请输入员工号",trigger:"blur"}],user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],user_password:[{required:!0,message:"请输入密码",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},tableCol:[{label:"生产计划",field:"product_plan_name",align:"center"},{label:"包装编码",field:"pack_id",align:"center"},{label:"产品编码",field:"product_id",align:"center"},{label:"产品名称",field:"product_name",align:"center"},{label:"数量",field:"product_count",align:"center"},{label:"操作人员",width:"200px",field:"user_name",align:"center"},{label:"状态",width:"200px",field:"status",align:"center"},{label:"时间",field:"enter_time",align:"center"},{label:"操作",colType:"solt",align:"center",option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[]}},computed:Object(s["a"])({},Object(c["c"])(["PersonCodeNameList","ProductPlanCodeNameList","CurrentUserInfo"])),methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])(["getLogisticPersonCodeName","getLogisticProductPlanCodeName"])),{},{searchBtn:function(){this.listQuery.page=1,this.getLogisticFinishedProductStorage(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticFinishedProductStorage(this.listQuery)},currentChange:function(e){this.listQuery.page=e,this.getLogisticFinishedProductStorage(this.listQuery)},sizeChange:function(e){this.listQuery.page=1,this.listQuery.page_size=e,this.getLogisticFinishedProductStorage(this.listQuery)},getLogisticFinishedProductStorage:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:l["a"].getLogisticFinishedProductStorage(e).then((function(e){if(console.log("成品列表 查询",e),0==e.code){var a=e.data.data;a.forEach((function(e){e.response_datas?e.product_count=e.response_datas.length:e.product_count=0,t.ProductPlanCodeNameList.forEach((function(t){e.product_plan_code==t.product_plan_code&&(e.product_plan_name=t.product_plan_name)})),t.PersonCodeNameList.forEach((function(t){e.enter_user==t.user_code&&(e.user_name=t.user_name)}))})),t.tableData=a,t.listQuery.total=e.data.total}else t.$message({message:e.message,type:"error"})}));case 1:case"end":return a.stop()}}),a)})))()},getLogisticFromDataModel:function(e){var t=this;l["a"].postLogisticPersonDeal(e).then((function(e){console.log("成品列表 新增",e),0==e.code?(t.dialogFlag=!1,t.getLogisticFinishedProductStorage(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},colEditBtn:function(e){var t=this;console.log(e),this.dialogTitle="修改包装",this.dialogFlag=!0,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()})),this.dialogForm={enter_time:e.enter_time,enter_user:e.enter_user,pack_id:e.pack_id,product_id:e.product_id,product_name:e.product_name,status:e.status,response_datas:e.response_datas}},getLogisticPutFinishedProductStorage:function(e){var t=this;l["a"].getLogisticPutFinishedProductStorage(e).then((function(e){console.log("成品列表 修改",e),0==e.code?(t.dialogFlag=!1,t.getLogisticFinishedProductStorage(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},dialogSave:function(){var e=this;this.$refs.dialogFormRef.validate((function(t){if(t){if("修改包装"==e.dialogTitle){var a=JSON.parse(JSON.stringify(e.dialogForm));a.response_datas=JSON.stringify(e.dialogForm.response_datas),e.getLogisticPutFinishedProductStorage(a)}}else e.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeleteFinishedProductStorage:function(e){var t=this;l["a"].getLogisticDeleteFinishedProductStorage(e).then((function(e){console.log("成品列表 删除",e),0==e.code?(t.getLogisticFinishedProductStorage(t.listQuery),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},handleDelete:function(e,t){var a=this;console.log(t),this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={prodect_code:t.pack_id,response_datas:JSON.stringify([{enter_storage_code:t.enter_storage_code}])};a.getLogisticDeleteFinishedProductStorage(i),a.dialogForm.response_datas.splice(e,1)}))},colDeleteBtn:function(e){var t=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={pack_id:e.pack_id,response_datas:JSON.stringify([])};t.getLogisticDeleteFinishedProductStorage(a)}))}}),mounted:function(){this.getLogisticPersonCodeName(),this.getLogisticProductPlanCodeName(),this.getLogisticFinishedProductStorage(this.listQuery)}},u=d,g=a("2877"),p=Object(g["a"])(u,i,o,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-0a50f942.512d689c.js.map